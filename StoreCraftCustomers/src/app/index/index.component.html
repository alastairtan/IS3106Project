<div fxLayout="row wrap" fxLayoutAlign="center" fxLayoutGap="12px grid">

  <div class="mat-elevate-z3" fxFlex="1 1 98%">

    <div fxLayout="row wrap" fxLayoutAlign="center" fxLayoutGap="12px grid" style="margin: 0">
      <div fxFlex="1 1 100%" fxFlexOrder="1" fxLayoutAlign="center">
        <div class="carousel slide" data-ride="carousel" id="carousel">
          <ol class="carousel-indicators">
            <li class="active" data-slide-to="0" data-target="#carousel"></li>
            <li data-slide-to="1" data-target="#carousel"></li>
            <li data-slide-to="2" data-target="#carousel"></li>
          </ol>
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img alt="First slide"
                   class="d-block w-100"
                   src="/assets/images/carousel1.webp">
            </div>
            <div class="carousel-item">
              <img alt="Second slide"
                   class="d-block w-100"
                   src="/assets/images/carousel2.webp">
            </div>
            <div class="carousel-item">
              <img alt="Third slide"
                   class="d-block w-100"
                   src="/assets/images/carousel3.webp">
            </div>
          </div>
          <a class="carousel-control-prev" data-slide="prev" href="#carousel" role="button">
            <span aria-hidden="true" class="carousel-control-prev-icon"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" data-slide="next" href="#carousel" role="button">
            <span aria-hidden="true" class="carousel-control-next-icon"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>

      <div class="mat-elevate-z3" fxFlex="1 1 100%" fxFlexOrder="2">
        <mat-card class="card" style="border-radius: 0">

          <div id="withinCard">
            <mat-card-content class="content">
              <!-- Community goal and scavenger hunt-->
              <div fxLayout="row wrap" fxLayoutAlign="start" fxLayoutGap="8px grid" style="padding: 12px">

                <div class="mat-elevate-z3 firstTable" fxFlex="1 1 50%">
                  <app-leaderboard-table></app-leaderboard-table>
                </div>

                <div class="mat-elevate-z3 firstTable" fxFlex="1 1 50%">
                  <app-leaderboard-table-all-time></app-leaderboard-table-all-time>
                </div>

                <div class="mat-elevate-z3 firstTable" fxFlex="1 1 50%">
                  <mat-card *ngIf="communityGoals?.length > 0 && sessionService.getIsLogin()" style="opacity: 0.9; border-radius: 0">
                    <!--community goal-->
                    <div fxLayout="row wrap">
                      <div fxFlex="1 1 65%">Community Goal ({{country}}): ${{this.goalAmt}}</div>
                      <div fxFlex="1 1 35%">
                        <mat-select [(ngModel)]="selected" panelClass="dropDownSelector" style="text-align:right">
                          <mat-option (click)="onClickChange()" *ngFor="let cg of communityGoals" [value]="(cg)">
                            {{cg?.goalTitle}}
                          </mat-option>
                        </mat-select>
                      </div>
                    </div>
                    <div fxLayoutAlign="center">
                      <div class="progress" style="border-radius: 20px">
                        <div [ngStyle]="{'width.%':this.percentage}" class="progress-bar" style="border-radius: 20px">
                          {{this.percentage | number:'0.0-2'}}%
                        </div>
                      </div>
                    </div>
                  </mat-card>
                  <mat-card style="opacity: 0.9; padding-bottom: 0" *ngIf="sessionService.getIsLogin() == false">
                    <mat-card-header>
                      <mat-card-title style="font-size: 2vw">
                        Login to see Community Goals
                      </mat-card-title>
                    </mat-card-header>
                  </mat-card>
                  <mat-card style="opacity: 0.9; padding-bottom: 0" *ngIf = "communityGoals?.length == 0 && sessionService.getIsLogin()">
                    <mat-card-header>
                      <mat-card-title style="font-size: 2vw">
                        No Ongoing Community Goals
                      </mat-card-title>
                    </mat-card-header>
                  </mat-card>
                </div>

                <div class="mat-elevate-z3 firstTable" fxFlex="1 1 50%">

                  <!--scavenger hunt-->
                  <app-scavenger-hunt-winners-index></app-scavenger-hunt-winners-index>

                </div>
              </div>

            </mat-card-content>
          </div>
        </mat-card>
      </div>
    </div>


    <div class="cardProducts" fxLayout="row wrap" fxLayoutAlign="center" fxLayoutGap="12px grid">
      <ng-container *ngFor="let product of products" class="card-item cardProducts">
        <app-product-card [product]="product" fxFlex="1 1 25%"></app-product-card>
      </ng-container>
    </div>


  </div>
</div>
